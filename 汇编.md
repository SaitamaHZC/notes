# 汇编



## 1. 基础概念

字：word,由两个字节组成，分别成为低位字节和高位字节

字节：由8位组成



## 2. 寄存器入门

### 寄存器分类

通用寄存器：AX BX CX DX

用于储存一般性的数据

段寄存器：CS DS SS ES	

提供段地址



### CS和IP

**CS为代码段寄存器，IP为指令指针寄存器**

设CS中的内容为M，IP 中的内容为N，8086CPU 将从内存M*16+N单元开始，读取一条指令并执行。



修改CS、IP：

JMP 段地址：偏移地址

JMP CS:IP

如：jmp 2AE3:3，执行后: CS= 2AE3H，IP=0003H， CPU将从2AE33H处读取指令。



修改IP:

JMP 某一合法寄存器

类似： mov IP,寄存器





### 地址

8086CPU有**20位**的地址总线，采用**两个16位地址合成**的方式形成20位地址。

**物理地址 = 段地址 * 16B（10D） + 偏移地址**



```
段地址：若干地址连续的内存单元看作一个段，段地址*16 定位起始地址（基础地址），偏移地址定位段中的内存单元。

段的起始地址因为由段地址*16决定，因此起始地址一定为16的倍数
段的偏移地址最大为65536 = 64KB，因此段最大的长度为64KB
```





## 3.  寄存器（ 内存访问）

内存单元是字节单元（8位），而CPU中用16位存储一个字，因此一个字要用两个地址连续的内存单元存放。低位字节存放在低地址单元中，高位字节存放在高地址单元中。

![image-20220930101729442](http://hzc-typora.oss-cn-shanghai.aliyuncs.com/img/image-20220930101729442.png)

如图所示，分别存储了4E20H和0012H



### 字的存储

**字单元**：即**存放一个字型数据(16位)的内存单元**，由**两个地址连续**的内存单元组成。高地址内存单元中存放字型数据的高位字节，低地址内存单元中
存放字型数据的低位字节。

起始地址为N的字单元简称为N地址字单元

0地址单元存放了20H 字节型数据 。

0地址字单元存放了4E20H 字型数据



### DS和[address]

mov指令已学到的三种使用方式：

①将数据直接送入寄存器

```
 mov bx,1000H
```

②将一个寄存器中的内容送入另一个寄存器。

```
mov bx,ax
```

③将一个**内存单元**中的内容送入一个寄存器中。

```
mov al,[0]
```



[address]表示一个内存单元，address表示**内存单元的偏移地址**，8086CPU自动取**ds中的数据为内存单元的段地址**。

因此 [address] 的地址为 **DS *16 + address**



```
mov ax,[0] ax16位，因此是将一个子单元的内容mov到ax中，高位放到ah,低位放到al
mov al,[0] al8位，将一个字节单位mov到al中
```



### mov / add /sub 

![image-20220930104017213](http://hzc-typora.oss-cn-shanghai.aliyuncs.com/img/image-20220930104017213.png)

![image-20220930104320460](http://hzc-typora.oss-cn-shanghai.aliyuncs.com/img/image-20220930104320460.png)





### 数据段

访问段中数据，同样使用DS作为段地址



### 栈 / SS /SP

SS为段寄存器，SP为寄存器，存放偏移地址

任意时刻SS:SP指向栈顶元素

![image-20220930105842198](http://hzc-typora.oss-cn-shanghai.aliyuncs.com/img/image-20220930105842198.png)

只要定义好SS SP ,我们就可以将任何一段地址空间作为栈使用

PUSH POP 指令修改的只是SP , SP范围为0 ~ FFFFH ,因此当SP指向0时（到达顶部），再入栈，SP变为FFFFH，回到底部







### PUSH / POP

形式：

```
push  寄存器/段寄存器/内存单元
pop  寄存器/段寄存器/内存单元
```

